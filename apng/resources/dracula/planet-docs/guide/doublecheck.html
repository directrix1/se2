<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>3&nbsp;Doublecheck</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Dracula</span>:<span class="mywbr"> </span> A Guide to ACL2 in Dr<span class="mywbr"> </span>Scheme</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="install.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="acl2.html" class="tocviewlink" pltdoc="x">ACL2</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Doublecheck</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="modular.html" class="tocviewlink" pltdoc="x">Modular ACL2</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Doublecheck</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#(part._.Examples)" class="tocviewlink" pltdoc="x">Examples</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#(part._.Examples)" class="tocsubseclink" pltdoc="x">Examples</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="acl2.html" title="backward to &quot;2 ACL2&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Dracula: A Guide to ACL2 in DrScheme&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="modular.html" title="forward to &quot;4 Modular ACL2&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._doublecheck)"></a>Doublecheck</h3><p>DoubleCheck is a Dracula teachpack for randomized testing. It is inspired
by the <a href="http://www.cs.chalmers.se/~rjmh/QuickCheck/">QuickCheck</a> library for Haskell, and
implemented with the <a href="http://planet.plt-scheme.org/display.ss?package=fasttest.plt&amp;owner=cce">FastTest</a> library for PLT Scheme.
DoubleCheck may be used before theorem proving to establish confidence in a
program property, or after a failed proof attempt to search for counterexamples.</p><h4>3.1<tt>&nbsp;</tt><a name="(part._.Examples)"></a>Examples</h4><p>Here is an example of a DoubleCheck property with an error, and the resulting
output from both DoubleCheck and ACL2. The property attempts to prove that
<span class="RktSym">nth</span> produces a member of its input, without establishing that its
input is in range. Note that DoubleCheck detects 19 errors out of the visible
21 trials, the first of which is shown in the SchemeUnit window (on the
right). We can see here that in this trial, <span class="RktSym">lst</span> was
<span class="RktPn">(</span><span class="RktVal">"yyhhp"</span><span class="RktPn">)</span> and <span class="RktSym">idx</span> was <span class="RktVal">386</span>. Doublecheck also
automatically provides a <span class="RktSym">check-expect</span> expression, to incorporate
this trial into a test suite. The ACL2 output (middle) shows checkpoints from
the faulty theorem corresponding to the DoubleCheck property.</p><p><img src="doublecheck-fail.png" alt="" /></p><p>Here is a corrected version of the same DoubleCheck property. Now the index
to <span class="RktSym">nth</span> is constrained based on the length of the list, and its
random distribution is stated explicitly. Both the DoubleCheck and ACL2
output show success.</p><p><img src="doublecheck-ok.png" alt="" /></p><p>For more detailed information, see <a href="/servlets/doc-search.rkt?tag=KCgyKSAwICgpIDAgKCkgKCkgKGMgcGFydCBjIChjICh1IC4gKHBsYW5ldCByZWZlcmVuY2Uu%0D%0Ac2NyYmwgKGNjZSBkcmFjdWxhLnBsdCA4IDE2KSByZWZlcmVuY2UpKSBjIGRvdWJsZWNoZWNr%0D%0AKSkp%0D%0A" pltdoc="x"><span class="RktVal">"doublecheck"</span></a> in
<a href="/servlets/doc-search.rkt?tag=KCgyKSAwICgpIDAgKCkgKCkgKGMgcGFydCBjIChjICh1IC4gKHBsYW5ldCByZWZlcmVuY2Uu%0D%0Ac2NyYmwgKGNjZSBkcmFjdWxhLnBsdCA4IDE2KSByZWZlcmVuY2UpKSBjIHRvcCkpKQ%3D%3D%0D%0A" pltdoc="x"><span style="font-weight: bold">Dracula</span>: Reference Manual</a>.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="acl2.html" title="backward to &quot;2 ACL2&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Dracula: A Guide to ACL2 in DrScheme&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="modular.html" title="forward to &quot;4 Modular ACL2&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>